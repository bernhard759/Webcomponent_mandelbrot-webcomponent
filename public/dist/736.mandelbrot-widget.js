(()=>{let e,t,i,r,o,a,n;function m(n,m){return{re:n=i[0]+n/e*o,im:m=r[0]+m/t*a}}function s(e){let t,i,r={re:0,im:0},o=0;do{t={re:Math.pow(r.re,2)-Math.pow(r.im,2),im:2*r.re*r.im},r={re:t.re+e.re,im:t.im+e.im},i=Math.sqrt(Math.pow(r.re,2)+Math.pow(r.im,2)),o+=1}while(i<=2&&o<n);return{iterations:o,in:i<=2}}function l(e,t){let i,r,o=0;do{i={re:Math.pow(e.re,2)-Math.pow(e.im,2),im:2*e.re*e.im},e={re:i.re+t.re,im:i.im+t.im},r=Math.sqrt(Math.pow(e.re,2)+Math.pow(e.im,2)),o+=1}while(r<=2&&o<n);return{iterations:o,in:r<=2}}self.addEventListener("message",(function(h){const{w:c,h:p,realSet:w,imagSet:M,isSettingUp:f,mandel:u,point:d,iterationCount:g}=h.data;if(n=g,i=[w[0],w[1]],r=[M[0],M[1]],o=i[1]-i[0],a=r[1]-r[0],e=c,t=p,!f){const{col:e}=h.data,i=[];for(let r=0;r<t;r++)i[r]=u?s(m(e,r)):l(m(e,r),d);console.log("Worker "+self.name+"calculated "+e),self.postMessage({name:self.name,col:e,theSets:i})}}))})();